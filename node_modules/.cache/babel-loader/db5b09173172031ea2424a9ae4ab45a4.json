{"ast":null,"code":"var _jsxFileName = \"/Users/erikmacinnis/Desktop/BlockChainProjects/jumping_game/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Floor from './components/Floor.js';\nimport Block from './components/Block.js';\nimport TileFrame from './components/TileFrame.js';\nimport Score from './components/Score.js';\nimport NftPage from './components/NftPage.js';\nimport factory from './blockchain/factory.js';\nimport signer from './blockchain/ethers.js';\nimport './css/stylesheet.css';\nimport { ethers } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [nft, setNft] = useState(null);\n  const [nftCollection, setNftCollection] = useState([false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]);\n  const [nftPage, setNftPage] = useState(false);\n  const [score, setScore] = useState(0);\n  const [highScore, setHighScore] = useState(0);\n  const [worldHighScore, setWorldHighScore] = useState(0);\n  const [worldHighScoreHolder, setWorldHighScoreHolder] = useState(null);\n  const [ended, setEnded] = useState(true);\n  const [height, setHeight] = useState(100);\n  const [bottom, setBottom] = useState(false);\n  const [initialTilePos, setInitialTilePos] = useState(0);\n  const [firstTilePos, setFirstTilePos] = useState(0);\n  const [gameContract, setGameContract] = useState(null);\n\n  const loadGame = async () => {\n    const walletAddress = await signer.getAddress();\n    const ERC20_ABI = ['constructor()', 'function highScore() public view returns (uint256)', 'function mint(string memory tokenURI) public returns (uint256)', 'function setNewHighScore(uint256 newHighScore) external', 'function ownerOf(uint256 tokenId) public view returns (address)'];\n\n    if (!(await factory.isPlayedBefore(walletAddress))) {\n      await factory.newJumpingGame();\n      setGameContract(gameContract);\n    }\n\n    const gameAddress = await factory.playersJumpingGameAddress(walletAddress);\n    const gameContract = new ethers.Contract(gameAddress, ERC20_ABI, signer);\n    console.log(gameAddress);\n    setGameContract(gameContract);\n    setHighScore(await gameContract.highScore());\n    setWorldHighScore(await factory.worldHighScore());\n    setWorldHighScoreHolder(await factory.worldHighScoreHolder());\n\n    try {\n      const owner = await gameContract.ownerOf(11);\n      console.log(owner);\n    } catch (error) {\n      console.log(\"user doesn't own this\");\n    }\n  };\n\n  useEffect(() => {\n    loadGame();\n    console.log(\"game loaded\");\n  }, []);\n  useEffect(() => {\n    console.log();\n  }, [highScore]);\n  useEffect(() => {\n    startGame();\n  }, [ended]);\n\n  const startGame = () => {\n    console.log(\"runing useEffect\");\n\n    if (!ended) {\n      let countdown, textnode;\n      const timer1 = setTimeout(run, 1000);\n\n      function run() {\n        countdown = document.createElement(\"div\");\n        textnode = document.createTextNode(\"3\");\n        countdown.appendChild(textnode);\n        document.getElementById(\"container\").appendChild(countdown);\n        clearInterval(timer1);\n      }\n\n      console.log(\"timer2\");\n      const timer2 = setTimeout(run2, 1000);\n\n      function run2() {\n        textnode.innerHTML = \"2\";\n        document.getElementById(\"container\").appendChild(countdown);\n        clearInterval(timer2);\n      }\n\n      console.log(\"timer1\");\n      const timer3 = setTimeout(run3, 1000);\n\n      function run3() {\n        textnode.innerHTML = \"1\";\n        document.getElementById(\"container\").appendChild(countdown);\n        clearInterval(timer3);\n      }\n    }\n  };\n\n  if (!nftPage) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui container\",\n      id: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Score, {\n        setNftPage: setNftPage,\n        setScore: setScore,\n        setEnded: setEnded,\n        setHeight: setHeight,\n        setBottom: setBottom,\n        score: score,\n        ended: ended,\n        setNftPage: setNftPage,\n        bottom: bottom\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Floor, {\n        setScore: setScore,\n        setHighScore: setHighScore,\n        setEnded: setEnded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TileFrame, {\n        bottom: bottom,\n        setInitialTilePos: setInitialTilePos,\n        setFirstTilePos: setFirstTilePos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Block, {\n        score: score,\n        setScore: setScore,\n        setEnded: setEnded,\n        height: height,\n        setHeight: setHeight,\n        bottom: bottom,\n        setBottom: setBottom,\n        initialTilePos: initialTilePos,\n        firstTilePos: firstTilePos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui container\",\n      style: {\n        backgroundColor: \"black\"\n      },\n      children: /*#__PURE__*/_jsxDEV(NftPage, {\n        setNftPage: setNftPage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(App, \"2YEfqmpA2VoZhs1pexEz65MHYk0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Floor","Block","TileFrame","Score","NftPage","factory","signer","ethers","App","nft","setNft","nftCollection","setNftCollection","nftPage","setNftPage","score","setScore","highScore","setHighScore","worldHighScore","setWorldHighScore","worldHighScoreHolder","setWorldHighScoreHolder","ended","setEnded","height","setHeight","bottom","setBottom","initialTilePos","setInitialTilePos","firstTilePos","setFirstTilePos","gameContract","setGameContract","loadGame","walletAddress","getAddress","ERC20_ABI","isPlayedBefore","newJumpingGame","gameAddress","playersJumpingGameAddress","Contract","console","log","owner","ownerOf","error","startGame","countdown","textnode","timer1","setTimeout","run","document","createElement","createTextNode","appendChild","getElementById","clearInterval","timer2","run2","innerHTML","timer3","run3","backgroundColor"],"sources":["/Users/erikmacinnis/Desktop/BlockChainProjects/jumping_game/src/App.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Floor from './components/Floor.js';\nimport Block from './components/Block.js';\nimport TileFrame from './components/TileFrame.js';\nimport Score from './components/Score.js';\nimport NftPage from './components/NftPage.js';\nimport factory from './blockchain/factory.js';\nimport signer from './blockchain/ethers.js';\nimport './css/stylesheet.css';\nimport { ethers } from 'ethers';\n\nconst App = () => {\n\n    const [nft, setNft] = useState(null);\n    const [nftCollection, setNftCollection] = useState([false, false, false, false, false, false, false, false, false, false, false, false, false, false, false]);\n    const [nftPage, setNftPage] = useState(false);\n    const [score, setScore] = useState(0);\n    const [highScore, setHighScore] = useState(0);\n    const [worldHighScore, setWorldHighScore] = useState(0);\n    const [worldHighScoreHolder, setWorldHighScoreHolder] = useState(null);\n    const [ended, setEnded] = useState(true);\n    const [height, setHeight] = useState(100);\n    const [bottom, setBottom] = useState(false);\n    const [initialTilePos, setInitialTilePos] = useState(0);\n    const [firstTilePos, setFirstTilePos] = useState(0);\n    const [gameContract, setGameContract] = useState(null);\n    \n    const loadGame = async() => {\n        const walletAddress = await signer.getAddress();\n        const ERC20_ABI = [\n            'constructor()',\n            'function highScore() public view returns (uint256)',\n            'function mint(string memory tokenURI) public returns (uint256)',\n            'function setNewHighScore(uint256 newHighScore) external',\n            'function ownerOf(uint256 tokenId) public view returns (address)'\n        ];\n        if (!(await factory.isPlayedBefore(walletAddress))){\n            await factory.newJumpingGame();\n            setGameContract(gameContract);\n        }\n        const gameAddress = await factory.playersJumpingGameAddress(walletAddress);\n        const gameContract = new ethers.Contract(gameAddress, ERC20_ABI, signer);\n        console.log(gameAddress);\n        setGameContract(gameContract);\n        setHighScore(await gameContract.highScore());\n        setWorldHighScore(await factory.worldHighScore());\n        setWorldHighScoreHolder(await factory.worldHighScoreHolder());\n        try {\n            const owner = await gameContract.ownerOf(11);\n            console.log(owner);\n        } catch (error){\n            console.log(\"user doesn't own this\")\n        }\n    }\n\n    useEffect( () => {\n        loadGame();\n        console.log(\"game loaded\");\n    }, [])\n\n    useEffect( () => {\n        console.log()\n    }, [highScore])\n\n    useEffect( () => {\n        startGame();\n    }, [ended]);\n\n    const startGame = () => {\n        console.log(\"runing useEffect\");\n\n        if (!ended){\n            let countdown, textnode;\n            const timer1 = setTimeout(run, 1000);\n            function run() {\n                countdown = document.createElement(\"div\");\n                textnode = document.createTextNode(\"3\");\n                countdown.appendChild(textnode);\n                document.getElementById(\"container\").appendChild(countdown);\n                clearInterval(timer1);\n            }\n            console.log(\"timer2\");\n            const timer2 = setTimeout(run2, 1000);\n            function run2() {\n                textnode.innerHTML = \"2\";\n                document.getElementById(\"container\").appendChild(countdown);\n                clearInterval(timer2);\n            }\n            console.log(\"timer1\")\n            const timer3 = setTimeout(run3, 1000);\n            function run3() {\n                textnode.innerHTML = \"1\";\n                document.getElementById(\"container\").appendChild(countdown);\n                clearInterval(timer3);\n            }\n        }\n    }\n\n    if (!nftPage) {\n        return (\n            <div className=\"ui container\" id=\"container\">\n                <Score setNftPage={setNftPage} setScore={setScore} setEnded={setEnded} setHeight={setHeight} setBottom={setBottom} score={score} ended={ended} setNftPage={setNftPage} bottom={bottom}/>\n                <Floor setScore={setScore} setHighScore={setHighScore} setEnded={setEnded}/>\n                <TileFrame bottom={bottom} setInitialTilePos={setInitialTilePos} setFirstTilePos={setFirstTilePos}/>\n                <Block score={score} setScore={setScore} setEnded={setEnded} height={height} setHeight={setHeight} bottom={bottom} setBottom={setBottom} initialTilePos={initialTilePos} firstTilePos={firstTilePos}/>\n            </div>\n    )\n    } else {\n        return (\n            <div className=\"ui container\" style={{backgroundColor: \"black\"}}>\n                <NftPage setNftPage={setNftPage}/>\n            </div>\n        )\n    }\n    \n\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}