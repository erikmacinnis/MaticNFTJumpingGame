{"ast":null,"code":"var _jsxFileName = \"/Users/erikmacinnis/Desktop/BlockChainProjects/jumping_game/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Floor from './components/Floor.js';\nimport Block from './components/Block.js';\nimport TileFrame from './components/TileFrame.js';\nimport Score from './components/Score.js';\nimport NftPage from './components/NftPage.js';\nimport factory from './blockchain/factory.js';\nimport signer from './blockchain/ethers.js';\nimport './css/stylesheet.css';\nimport { ethers } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [nftChange, setNftChange] = useState(null);\n  const [nftPage, setNftPage] = useState(false);\n  const [score, setScore] = useState(0);\n  const [highScore, setHighScore] = useState(0);\n  const [worldHighScore, setWorldHighScore] = useState(0);\n  const [worldHighScoreHolder, setWorldHighScoreHolder] = useState(null);\n  const [ended, setEnded] = useState(true);\n  const [height, setHeight] = useState(100);\n  const [bottom, setBottom] = useState(false);\n  const [initialTilePos, setInitialTilePos] = useState(0);\n  const [firstTilePos, setFirstTilePos] = useState(0);\n  const [gameContract, setGameContract] = useState(null);\n  useEffect(() => {\n    loadGame();\n  }, [highScore]);\n  useEffect(() => {\n    if (!ended) {\n      startGame();\n    }\n  }, [ended]);\n\n  const loadGame = async () => {\n    const walletAddress = await signer.getAddress();\n    const ERC20_ABI = ['constructor()', 'function highScore() public view returns (uint256)', 'function mint(string memory tokenURI, uint8 tokenId) public returns (uint256)', 'function setNewHighScore(uint256 newHighScore) external', 'function ownerOf(uint256 tokenId) public view returns (address)'];\n\n    if (!(await factory.isPlayedBefore(walletAddress))) {\n      const tx = await factory.newJumpingGame();\n      tx.wait();\n      setGameContract(gameContract);\n      localStorage.setItem(\"current block\", 0);\n    }\n\n    const gameAddress = await factory.playersJumpingGameAddress(walletAddress);\n    const gameContract = new ethers.Contract(gameAddress, ERC20_ABI, signer);\n    console.log(gameAddress);\n    setGameContract(gameContract);\n    const tempHighScore = await gameContract.highScore();\n    setHighScore(ethers.BigNumber.from(tempHighScore).toNumber());\n    const tempWorldHighScore = await factory.worldHighScore();\n    setWorldHighScore(ethers.BigNumber.from(tempWorldHighScore).toNumber());\n    const tempWorldHighScoreHolder = await factory.worldHighScoreHolder();\n    setWorldHighScoreHolder(ethers.BigNumber.from(tempWorldHighScoreHolder).toHexString());\n  };\n\n  const startGame = async () => {\n    let countdown, textnode;\n    const timer1 = setTimeout(run, 1000);\n\n    function run() {\n      countdown = document.createElement(\"div\");\n      countdown.className = \"number\";\n      textnode = document.createTextNode(\"3\");\n      countdown.appendChild(textnode);\n      document.getElementById(\"container\").appendChild(countdown);\n      clearInterval(timer1);\n    }\n\n    const timer2 = setTimeout(run2, 2000);\n\n    function run2() {\n      textnode.nodeValue = \"2\";\n      clearInterval(timer2);\n    }\n\n    const timer3 = setTimeout(run3, 3000);\n\n    function run3() {\n      textnode.nodeValue = \"1\";\n      clearInterval(timer3);\n    }\n\n    const start = setTimeout(bot, 4000);\n\n    function bot() {\n      setBottom(true);\n      countdown.remove();\n      clearInterval(start);\n    }\n  };\n\n  if (!nftPage) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui container\",\n      id: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Score, {\n        setHighScore: setHighScore,\n        setWorldHighScore: setWorldHighScore,\n        setWorldHighScoreHolder: setWorldHighScoreHolder,\n        gameContract: gameContract,\n        highScore: highScore,\n        worldHighScore: worldHighScore,\n        worldHighScoreHolder: worldHighScoreHolder,\n        setNftPage: setNftPage,\n        setScore: setScore,\n        setEnded: setEnded,\n        setHeight: setHeight,\n        setBottom: setBottom,\n        score: score,\n        ended: ended,\n        bottom: bottom\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Floor, {\n        setScore: setScore,\n        setHighScore: setHighScore,\n        setEnded: setEnded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TileFrame, {\n        nftPage: nftPage,\n        bottom: bottom,\n        setInitialTilePos: setInitialTilePos,\n        setFirstTilePos: setFirstTilePos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Block, {\n        nftChange: nftChange,\n        score: score,\n        setScore: setScore,\n        setEnded: setEnded,\n        height: height,\n        setHeight: setHeight,\n        bottom: bottom,\n        setBottom: setBottom,\n        initialTilePos: initialTilePos,\n        firstTilePos: firstTilePos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui container\",\n      style: {\n        backgroundColor: \"black\"\n      },\n      children: /*#__PURE__*/_jsxDEV(NftPage, {\n        gameContract: gameContract,\n        setNftPage: setNftPage,\n        highScore: highScore,\n        setNftChange: setNftChange,\n        nftChange: nftChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(App, \"PmpmGO1M1m6JusY9VFuvAsCERuw=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Floor","Block","TileFrame","Score","NftPage","factory","signer","ethers","App","nftChange","setNftChange","nftPage","setNftPage","score","setScore","highScore","setHighScore","worldHighScore","setWorldHighScore","worldHighScoreHolder","setWorldHighScoreHolder","ended","setEnded","height","setHeight","bottom","setBottom","initialTilePos","setInitialTilePos","firstTilePos","setFirstTilePos","gameContract","setGameContract","loadGame","startGame","walletAddress","getAddress","ERC20_ABI","isPlayedBefore","tx","newJumpingGame","wait","localStorage","setItem","gameAddress","playersJumpingGameAddress","Contract","console","log","tempHighScore","BigNumber","from","toNumber","tempWorldHighScore","tempWorldHighScoreHolder","toHexString","countdown","textnode","timer1","setTimeout","run","document","createElement","className","createTextNode","appendChild","getElementById","clearInterval","timer2","run2","nodeValue","timer3","run3","start","bot","remove","backgroundColor"],"sources":["/Users/erikmacinnis/Desktop/BlockChainProjects/jumping_game/src/App.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Floor from './components/Floor.js';\nimport Block from './components/Block.js';\nimport TileFrame from './components/TileFrame.js';\nimport Score from './components/Score.js';\nimport NftPage from './components/NftPage.js';\nimport factory from './blockchain/factory.js';\nimport signer from './blockchain/ethers.js';\nimport './css/stylesheet.css';\nimport { ethers } from 'ethers';\n\nconst App = () => {\n\n    const [nftChange, setNftChange] = useState(null);\n    const [nftPage, setNftPage] = useState(false);\n    const [score, setScore] = useState(0);\n    const [highScore, setHighScore] = useState(0);\n    const [worldHighScore, setWorldHighScore] = useState(0);\n    const [worldHighScoreHolder, setWorldHighScoreHolder] = useState(null);\n    const [ended, setEnded] = useState(true);\n    const [height, setHeight] = useState(100);\n    const [bottom, setBottom] = useState(false);\n    const [initialTilePos, setInitialTilePos] = useState(0);\n    const [firstTilePos, setFirstTilePos] = useState(0);\n    const [gameContract, setGameContract] = useState(null);\n\n    useEffect( () => {\n        loadGame();\n    }, [highScore])\n\n    useEffect( () => {\n        if (!ended) {\n            startGame();\n        }\n    }, [ended]);\n    \n    const loadGame = async() => {\n        const walletAddress = await signer.getAddress();\n        const ERC20_ABI = [\n            'constructor()',\n            'function highScore() public view returns (uint256)',\n            'function mint(string memory tokenURI, uint8 tokenId) public returns (uint256)',\n            'function setNewHighScore(uint256 newHighScore) external',\n            'function ownerOf(uint256 tokenId) public view returns (address)'\n        ];\n        if (!(await factory.isPlayedBefore(walletAddress))){\n            const tx = await factory.newJumpingGame();\n            tx.wait();\n            setGameContract(gameContract);\n            localStorage.setItem(\"current block\", 0);\n        }\n        const gameAddress = await factory.playersJumpingGameAddress(walletAddress);\n        const gameContract = new ethers.Contract(gameAddress, ERC20_ABI, signer);\n        console.log(gameAddress);\n        setGameContract(gameContract);\n        const tempHighScore = await gameContract.highScore();\n        setHighScore(ethers.BigNumber.from(tempHighScore).toNumber());\n        const tempWorldHighScore = await factory.worldHighScore();\n        setWorldHighScore(ethers.BigNumber.from(tempWorldHighScore).toNumber());\n        const tempWorldHighScoreHolder = await factory.worldHighScoreHolder()\n        setWorldHighScoreHolder(ethers.BigNumber.from(tempWorldHighScoreHolder).toHexString());\n    }\n\n    const startGame = async() => {\n\n        let countdown, textnode;\n        const timer1 = setTimeout( run, 1000);\n        function run() {\n            countdown = document.createElement(\"div\");\n            countdown.className = \"number\";\n            textnode = document.createTextNode(\"3\");\n            countdown.appendChild(textnode);\n            document.getElementById(\"container\").appendChild(countdown);\n            clearInterval(timer1);\n        }\n        const timer2 = setTimeout( run2, 2000);\n        function run2() {\n            textnode.nodeValue = \"2\";\n            clearInterval(timer2);\n        }\n        const timer3 = setTimeout( run3, 3000);\n        function run3() {\n            textnode.nodeValue = \"1\";\n            \n            clearInterval(timer3);\n        }\n        const start = setTimeout(bot, 4000);\n        function bot() {\n            setBottom(true);\n            countdown.remove();\n            clearInterval(start);\n        }\n    }\n\n    if (!nftPage) {\n        return (\n            <div className=\"ui container\" id=\"container\">\n                <Score setHighScore={setHighScore} setWorldHighScore={setWorldHighScore} setWorldHighScoreHolder={setWorldHighScoreHolder} gameContract={gameContract} highScore={highScore} worldHighScore={worldHighScore} worldHighScoreHolder={worldHighScoreHolder} setNftPage={setNftPage} setScore={setScore} setEnded={setEnded} setHeight={setHeight} setBottom={setBottom} score={score} ended={ended} bottom={bottom}/>\n                <Floor setScore={setScore} setHighScore={setHighScore} setEnded={setEnded}/>\n                <TileFrame nftPage={nftPage} bottom={bottom} setInitialTilePos={setInitialTilePos} setFirstTilePos={setFirstTilePos}/>\n                <Block nftChange={nftChange} score={score} setScore={setScore} setEnded={setEnded} height={height} setHeight={setHeight} bottom={bottom} setBottom={setBottom} initialTilePos={initialTilePos} firstTilePos={firstTilePos}/>\n            </div>\n    )\n    } else {\n        return (\n            <div className=\"ui container\" style={{backgroundColor: \"black\"}}>\n                <NftPage gameContract={gameContract} setNftPage={setNftPage} highScore={highScore} setNftChange={setNftChange} nftChange={nftChange}/>\n            </div>\n        )\n    }\n    \n\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}