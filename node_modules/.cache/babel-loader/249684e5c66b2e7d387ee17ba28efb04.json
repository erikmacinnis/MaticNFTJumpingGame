{"ast":null,"code":"var _jsxFileName = \"/Users/erikmacinnis/Desktop/BlockChainProjects/jumping_game/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Floor from './components/Floor.js';\nimport Block from './components/Block.js';\nimport TileFrame from './components/TileFrame.js';\nimport Score from './components/Score.js';\nimport NftPage from './components/NftPage.js';\nimport factory from './blockchain/factory.js';\nimport signer from './blockchain/ethers.js';\nimport './css/stylesheet.css';\nimport { ethers } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [nft, setNft] = useState(null);\n  const [nftPage, setNftPage] = useState(false);\n  const [score, setScore] = useState(0);\n  const [highScore, setHighScore] = useState(0);\n  const [worldHighScore, setWorldHighScore] = useState(0);\n  const [worldHighScoreHolder, setWorldHighScoreHolder] = useState(null);\n  const [ended, setEnded] = useState(true);\n  const [height, setHeight] = useState(100);\n  const [bottom, setBottom] = useState(false);\n  const [initialTilePos, setInitialTilePos] = useState(0);\n  const [firstTilePos, setFirstTilePos] = useState(0);\n  const [gameContract, setGameContract] = useState(null);\n\n  const loadGame = async () => {\n    const walletAddress = await signer.getAddress();\n    const ERC20_ABI = ['constructor()', 'function highScore() public view returns (uint256)', 'function mint(string memory tokenURI) public returns (uint256)', 'function setNewHighScore(uint256 newHighScore) external', 'function ownerOf(uint256 tokenId) public view returns (address)'];\n\n    if (!(await factory.isPlayedBefore(walletAddress))) {\n      const tx = await factory.newJumpingGame();\n      tx.wait();\n      setGameContract(gameContract);\n    }\n\n    const gameAddress = await factory.playersJumpingGameAddress(walletAddress);\n    const gameContract = new ethers.Contract(gameAddress, ERC20_ABI, signer);\n    console.log(gameAddress);\n    setGameContract(gameContract);\n    setHighScore(await gameContract.highScore());\n    setWorldHighScore(await factory.worldHighScore());\n    setWorldHighScoreHolder(await factory.worldHighScoreHolder());\n  };\n\n  useEffect(() => {\n    loadGame();\n    console.log(\"game loaded\");\n  }, []);\n  useEffect(() => {\n    console.log();\n  }, [highScore]);\n  useEffect(() => {\n    startGame();\n  }, [ended]);\n\n  const startGame = async () => {\n    console.log(\"runing useEffect\");\n\n    if (!ended) {\n      let countdown, textnode;\n      const timer1 = setTimeout(run, 1000);\n\n      function run() {\n        countdown = document.createElement(\"div\");\n        countdown.className = \"number\";\n        textnode = document.createTextNode(\"3\");\n        countdown.appendChild(textnode);\n        document.getElementById(\"container\").appendChild(countdown);\n        clearInterval(timer1);\n      }\n\n      const timer2 = setTimeout(run2, 2000);\n\n      function run2() {\n        textnode.nodeValue = \"2\";\n        clearInterval(timer2);\n      }\n\n      const timer3 = setTimeout(run3, 3000);\n\n      function run3() {\n        textnode.nodeValue = \"1\";\n        clearInterval(timer3);\n      }\n\n      const start = setTimeout(bot, 4000);\n\n      function bot() {\n        setBottom(true);\n        countdown.remove();\n        clearInterval(start);\n      }\n    }\n  };\n\n  if (!nftPage) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui container\",\n      id: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Score, {\n        setNftPage: setNftPage,\n        setScore: setScore,\n        setEnded: setEnded,\n        setHeight: setHeight,\n        setBottom: setBottom,\n        score: score,\n        ended: ended,\n        setNftPage: setNftPage,\n        bottom: bottom\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Floor, {\n        setScore: setScore,\n        setHighScore: setHighScore,\n        setEnded: setEnded\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TileFrame, {\n        nftPage: nftPage,\n        bottom: bottom,\n        setInitialTilePos: setInitialTilePos,\n        setFirstTilePos: setFirstTilePos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Block, {\n        score: score,\n        setScore: setScore,\n        setEnded: setEnded,\n        height: height,\n        setHeight: setHeight,\n        bottom: bottom,\n        setBottom: setBottom,\n        initialTilePos: initialTilePos,\n        firstTilePos: firstTilePos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui container\",\n      style: {\n        backgroundColor: \"black\"\n      },\n      children: /*#__PURE__*/_jsxDEV(NftPage, {\n        gameContract: gameContract,\n        setNftPage: setNftPage,\n        highScore: highScore,\n        setNft: setNft,\n        nft: nft\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this);\n  }\n};\n\n_s(App, \"nXucEAYTTHH1cqUYt5exFsCas5c=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Floor","Block","TileFrame","Score","NftPage","factory","signer","ethers","App","nft","setNft","nftPage","setNftPage","score","setScore","highScore","setHighScore","worldHighScore","setWorldHighScore","worldHighScoreHolder","setWorldHighScoreHolder","ended","setEnded","height","setHeight","bottom","setBottom","initialTilePos","setInitialTilePos","firstTilePos","setFirstTilePos","gameContract","setGameContract","loadGame","walletAddress","getAddress","ERC20_ABI","isPlayedBefore","tx","newJumpingGame","wait","gameAddress","playersJumpingGameAddress","Contract","console","log","startGame","countdown","textnode","timer1","setTimeout","run","document","createElement","className","createTextNode","appendChild","getElementById","clearInterval","timer2","run2","nodeValue","timer3","run3","start","bot","remove","backgroundColor"],"sources":["/Users/erikmacinnis/Desktop/BlockChainProjects/jumping_game/src/App.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Floor from './components/Floor.js';\nimport Block from './components/Block.js';\nimport TileFrame from './components/TileFrame.js';\nimport Score from './components/Score.js';\nimport NftPage from './components/NftPage.js';\nimport factory from './blockchain/factory.js';\nimport signer from './blockchain/ethers.js';\nimport './css/stylesheet.css';\nimport { ethers } from 'ethers';\n\nconst App = () => {\n\n    const [nft, setNft] = useState(null);\n    const [nftPage, setNftPage] = useState(false);\n    const [score, setScore] = useState(0);\n    const [highScore, setHighScore] = useState(0);\n    const [worldHighScore, setWorldHighScore] = useState(0);\n    const [worldHighScoreHolder, setWorldHighScoreHolder] = useState(null);\n    const [ended, setEnded] = useState(true);\n    const [height, setHeight] = useState(100);\n    const [bottom, setBottom] = useState(false);\n    const [initialTilePos, setInitialTilePos] = useState(0);\n    const [firstTilePos, setFirstTilePos] = useState(0);\n    const [gameContract, setGameContract] = useState(null);\n    \n    const loadGame = async() => {\n        const walletAddress = await signer.getAddress();\n        const ERC20_ABI = [\n            'constructor()',\n            'function highScore() public view returns (uint256)',\n            'function mint(string memory tokenURI) public returns (uint256)',\n            'function setNewHighScore(uint256 newHighScore) external',\n            'function ownerOf(uint256 tokenId) public view returns (address)'\n        ];\n        if (!(await factory.isPlayedBefore(walletAddress))){\n            const tx = await factory.newJumpingGame();\n            tx.wait();\n            setGameContract(gameContract);\n        }\n        const gameAddress = await factory.playersJumpingGameAddress(walletAddress);\n        const gameContract = new ethers.Contract(gameAddress, ERC20_ABI, signer);\n        console.log(gameAddress);\n        setGameContract(gameContract);\n        setHighScore(await gameContract.highScore());\n        setWorldHighScore(await factory.worldHighScore());\n        setWorldHighScoreHolder(await factory.worldHighScoreHolder());\n    }\n\n    useEffect( () => {\n        loadGame();\n        console.log(\"game loaded\");\n    }, [])\n\n    useEffect( () => {\n        console.log()\n    }, [highScore])\n\n    useEffect( () => {\n        startGame();\n    }, [ended]);\n\n    const startGame = async() => {\n        console.log(\"runing useEffect\");\n\n        if (!ended){\n            let countdown, textnode;\n            const timer1 = setTimeout( run, 1000);\n            function run() {\n                countdown = document.createElement(\"div\");\n                countdown.className = \"number\";\n                textnode = document.createTextNode(\"3\");\n                countdown.appendChild(textnode);\n                document.getElementById(\"container\").appendChild(countdown);\n                clearInterval(timer1);\n            }\n            const timer2 = setTimeout( run2, 2000);\n            function run2() {\n                textnode.nodeValue = \"2\";\n                clearInterval(timer2);\n            }\n            const timer3 = setTimeout( run3, 3000);\n            function run3() {\n                textnode.nodeValue = \"1\";\n                \n                clearInterval(timer3);\n            }\n            const start = setTimeout(bot, 4000);\n            function bot() {\n                setBottom(true);\n                countdown.remove();\n                clearInterval(start);\n            }\n        }\n    }\n\n    if (!nftPage) {\n        return (\n            <div className=\"ui container\" id=\"container\">\n                <Score setNftPage={setNftPage} setScore={setScore} setEnded={setEnded} setHeight={setHeight} setBottom={setBottom} score={score} ended={ended} setNftPage={setNftPage} bottom={bottom}/>\n                <Floor setScore={setScore} setHighScore={setHighScore} setEnded={setEnded}/>\n                <TileFrame nftPage={nftPage} bottom={bottom} setInitialTilePos={setInitialTilePos} setFirstTilePos={setFirstTilePos}/>\n                <Block score={score} setScore={setScore} setEnded={setEnded} height={height} setHeight={setHeight} bottom={bottom} setBottom={setBottom} initialTilePos={initialTilePos} firstTilePos={firstTilePos}/>\n            </div>\n    )\n    } else {\n        return (\n            <div className=\"ui container\" style={{backgroundColor: \"black\"}}>\n                <NftPage gameContract={gameContract} setNftPage={setNftPage} highScore={highScore} setNft={setNft} nft={nft}/>\n            </div>\n        )\n    }\n    \n\n};\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}